"use strict";(self.webpackChunkangular_dashboard=self.webpackChunkangular_dashboard||[]).push([[267],{2267:(ge,S,c)=>{c.r(S),c.d(S,{BoardModule:()=>fe});var k=c(6895),d=c(2655),T=c(3841),r=c(2997),p=c(433),F=c(7618),l=c(5325);const $=(0,r.PH)(l.M.GET_LISTS,(0,r.Ky)()),I=(0,r.PH)(l.M.GET_LISTS_SUCCESS,(0,r.Ky)()),O=(0,r.PH)(l.M.GET_LISTS_FAILURE,(0,r.Ky)()),P=(0,r.PH)(l.M.OPEN_ADD_TASK_MODAL,(0,r.Ky)()),Z=(0,r.PH)(l.M.OPEN_EDIT_TASK_MODAL,(0,r.Ky)()),K=(0,r.PH)(l.M.CLOSE_TASK_MODAL);var E=c(7059);const x=(0,r.PH)(l.M.ADD_TASK,(0,r.Ky)()),G=(0,r.PH)(l.M.ADD_TASK_SUCCESS,(0,r.Ky)()),U=(0,r.PH)(l.M.ADD_TASK_FAILURE,(0,r.Ky)()),D=(0,r.PH)(l.M.EDIT_TASK,(0,r.Ky)()),Y=(0,r.PH)(l.M.EDIT_TASK_SUCCESS,(0,r.Ky)()),H=(0,r.PH)(l.M.EDIT_TASK_FAILURE,(0,r.Ky)()),B=(0,r.PH)(l.M.DELETE_TASK,(0,r.Ky)()),N=(0,r.PH)(l.M.DELETE_TASK_SUCCESS,(0,r.Ky)()),J=(0,r.PH)(l.M.DELETE_TASK_FAILURE,(0,r.Ky)()),w=(0,r.PH)(l.M.DELETE_TASK_FROM_ARCHIVE,(0,r.Ky)()),R=(0,r.PH)(l.M.DELETE_TASK_FROM_ARCHIVE_SUCCESS,(0,r.Ky)()),Q=(0,r.PH)(l.M.DELETE_TASK_FROM_ARCHIVE_FAILURE,(0,r.Ky)());var at=c(3520),it=c(5180);const z=(0,r.PH)(l.M.SET_DRAGGED_TASK_ID,(0,r.Ky)()),X=(0,r.PH)(l.M.DRAG_RESULT),V=(0,r.PH)(l.M.CLEAR_DRAG_OVER),j=(0,r.PH)(l.M.CHANGE_TASK_LIST,(0,r.Ky)()),W=(0,r.PH)(l.M.CHANGE_TASK_LIST_SUCCESS,(0,r.Ky)()),q=(0,r.PH)(l.M.ARCHIVE_TASK,(0,r.Ky)()),tt=(0,r.PH)(l.M.ARCHIVE_TASK_SUCCESS,(0,r.Ky)()),et=(0,r.PH)(l.M.ARCHIVE_TASK_FAILURE,(0,r.Ky)()),dt=(0,r.Lq)({lists:[],tasks:[],archivedTasks:[],currentList:null,currentTask:null,draggedTaskId:null,dragOver:"",boardName:"",isTaskModalOpened:!1,isEditMode:!1,backendErrorMessage:null},(0,r.on)(I,(t,n)=>({...t,lists:n.response.lists,boardName:n.response.boardName})),(0,r.on)(E._0,(t,n)=>({...t,tasks:n.tasks.filter(s=>null!==s.listId),archivedTasks:n.tasks.filter(s=>null===s.listId)})),(0,r.on)(G,(t,n)=>{const s=[...t.tasks,n.newTask];return{...t,tasks:s}}),(0,r.on)(Y,(t,n)=>{const s=t.tasks.findIndex(i=>i._id===n.taskId),o={...t.tasks[s],name:n.newName},a=[...t.tasks];return a[s]=o,{...t,tasks:a}}),(0,r.on)(N,(t,n)=>{const s=t.tasks.filter(o=>o._id!==n.taskId);return{...t,tasks:s}}),(0,r.on)(at.r,(t,n)=>{const s=t.tasks.filter(o=>o.name.toLowerCase().includes(n.filter));return{...t,tasks:s}}),(0,r.on)(it.B,(t,n)=>{const s=[...t.tasks];return s.sort((o,a)=>{const i=o[`${n.sortParam}`].toLowerCase(),u=a[`${n.sortParam}`].toLowerCase();return("ASC"===n.sortMode?i<u:i>u)?-1:("ASC"===n.sortMode?i>u:i<u)?1:0}),{...t,tasks:s}}),(0,r.on)(P,(t,n)=>({...t,isTaskModalOpened:!0,currentList:n.currentList})),(0,r.on)(Z,(t,n)=>({...t,isTaskModalOpened:!0,isEditMode:!0,currentTask:n.currentTask})),(0,r.on)(K,t=>({...t,isTaskModalOpened:!1,isEditMode:!1,currentList:null,currentTask:null})),(0,r.on)(z,(t,n)=>({...t,draggedTaskId:n.taskId})),(0,r.on)(W,(t,n)=>{if(t.tasks.find(a=>a._id===n.taskId).listId===n.listId)return{...t};const o=t.tasks.map(a=>a._id===n.taskId?{...a,listId:n.listId}:{...a});return{...t,tasks:o}}),(0,r.on)(X,t=>({...t,dragOver:t.draggedTaskId,draggedTaskId:""})),(0,r.on)(V,t=>({...t,dragOver:""})),(0,r.on)(tt,(t,n)=>{const s=[...t.tasks],a={...s.find(f=>f._id===n.taskId),listId:null},i=[...t.archivedTasks,a],u=s.filter(f=>f._id!==n.taskId);return{...t,tasks:u,archivedTasks:i}}),(0,r.on)(R,(t,n)=>{const s=t.archivedTasks.filter(o=>o._id!==n.taskId);return{...t,archivedTasks:s}}),(0,r.on)(O,E.f9,U,H,J,Q,et,(t,n)=>({...t,backendErrorMessage:n.backendErrorMessage})));function lt(t,n){return dt(t,n)}var g=c(4004);const h=t=>t.board,ut=(0,r.P1)(h,t=>t.lists),pt=(0,r.P1)(h,t=>t.tasks),kt=(0,r.P1)(h,t=>t.boardName),ht=(0,r.P1)(h,t=>t.currentList),ft=(0,r.P1)(h,t=>t.currentTask),gt=(0,r.P1)(h,t=>t.isTaskModalOpened),mt=(0,r.P1)(h,t=>t.isEditMode),Tt=(0,r.P1)(h,t=>t.draggedTaskId),vt=(0,r.P1)(h,t=>t.dragOver),_t=(0,r.P1)(h,t=>t.archivedTasks),bt=(0,r.P1)(h,t=>t.backendErrorMessage);var e=c(4650),At=c(6444),Mt=c(1569),Et=c(8421),Ct=c(9751),yt=c(5577),Lt=c(1144),_=c(576),St=c(3268);const Ft=["addListener","removeListener"],$t=["addEventListener","removeEventListener"],It=["on","off"];function C(t,n,s,o){if((0,_.m)(s)&&(o=s,s=void 0),o)return C(t,n,s).pipe((0,St.Z)(o));const[a,i]=function Zt(t){return(0,_.m)(t.addEventListener)&&(0,_.m)(t.removeEventListener)}(t)?$t.map(u=>f=>t[u](n,f,s)):function Ot(t){return(0,_.m)(t.addListener)&&(0,_.m)(t.removeListener)}(t)?Ft.map(st(t,n)):function Pt(t){return(0,_.m)(t.on)&&(0,_.m)(t.off)}(t)?It.map(st(t,n)):[];if(!a&&(0,Lt.z)(t))return(0,yt.z)(u=>C(u,n,s))((0,Et.Xf)(t));if(!a)throw new TypeError("Invalid event target");return new Ct.y(u=>{const f=(...L)=>u.next(1<L.length?L:L[0]);return a(f),()=>i(f)})}function st(t,n){return s=>o=>t[s](n,o)}var y=c(8505),m=c(3900),Kt=c(2722);const xt=["draggable"];function Gt(t,n){if(1&t){const s=e.EpF();e.TgZ(0,"div",5)(1,"button",6),e.NdJ("click",function(){e.CHM(s);const a=e.oxw();return e.KtG(a.onOpenEditTaskModal())}),e.qZA(),e.TgZ(2,"button",7),e.NdJ("click",function(){e.CHM(s);const a=e.oxw();return e.KtG(a.onDeleteTask())}),e.qZA()()}}function Ut(t,n){if(1&t){const s=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(s);const a=e.oxw();return e.KtG(a.onDeleteTaskFromArchive())}),e.qZA()}}let ot=(()=>{class t{constructor(s){this.store=s}get $draggable(){return this.draggableChild.nativeElement}ngAfterViewInit(){const s=C(this.$draggable,"mousedown").pipe((0,y.b)(()=>this.store.dispatch(z({taskId:this.task._id})))),o=C(document,"mouseup").pipe((0,y.b)(()=>{this.store.dispatch(X()),this.store.dispatch(V()),this.$draggable.classList.remove("dragged"),this.$draggable.style.removeProperty("left"),this.$draggable.style.removeProperty("top")})),a=C(document,"mousemove");s.pipe((0,m.w)(i=>a.pipe((0,y.b)(u=>{this.$draggable.classList.add("dragged"),this.$draggable.style.left=u.pageX-i.offsetX+"px",this.$draggable.style.top=u.pageY-i.offsetY+"px"}),(0,Kt.R)(o)))).subscribe()}onOpenEditTaskModal(){this.store.dispatch(Z({currentTask:this.task}))}onDeleteTask(){this.store.dispatch(B({taskId:this.task._id}))}onDeleteTaskFromArchive(){this.store.dispatch(w({taskId:this.task._id}))}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(r.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-board-task"]],viewQuery:function(s,o){if(1&s&&e.Gf(xt,5),2&s){let a;e.iGM(a=e.CRH())&&(o.draggableChild=a.first)}},inputs:{task:"task"},decls:6,vars:3,consts:[["draggable","false",1,"task"],["draggable",""],[1,"task__name"],["class","task-controls",4,"ngIf"],["type","button","class","task-controls__button task-controls__button_delete",3,"click",4,"ngIf"],[1,"task-controls"],["type","button",1,"task-controls__button","task-controls__button_edit",3,"click"],["type","button",1,"task-controls__button","task-controls__button_delete",3,"click"]],template:function(s,o){1&s&&(e.TgZ(0,"li",0,1)(2,"div",2),e._uU(3),e.qZA(),e.YNc(4,Gt,3,0,"div",3),e.YNc(5,Ut,1,0,"button",4),e.qZA()),2&s&&(e.xp6(3),e.Oqu(o.task.name),e.xp6(1),e.Q6J("ngIf",o.task.listId),e.xp6(1),e.Q6J("ngIf",null===o.task.listId))},dependencies:[k.O5],styles:[".task[_ngcontent-%COMP%]{display:flex;justify-content:space-between;list-style:none;padding:5px 10px;background-color:#97e125;cursor:grab}.task[_ngcontent-%COMP%]:active{cursor:grabbing}.task__name[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.task-controls[_ngcontent-%COMP%]{display:flex;gap:5px}.task-controls__button[_ngcontent-%COMP%]{background-color:transparent;background-size:cover;border:none;width:30px;cursor:pointer}.task-controls__button_edit[_ngcontent-%COMP%]{background-image:url(edit.ddb012570656b512.png)}.task-controls__button_delete[_ngcontent-%COMP%]{background-image:url(delete.86dec83ced320ae3.png)}.dragged[_ngcontent-%COMP%]{position:fixed;width:300px;z-index:2}"],changeDetection:0}),t})();const Dt=["$list"];function Yt(t,n){1&t&&e._UZ(0,"app-board-task",8),2&t&&e.Q6J("task",n.$implicit)}const Ht=function(t){return{backgroundColor:t}};let Bt=(()=>{class t{constructor(s){this.store=s}get $list(){return this.listChild.nativeElement}ngOnInit(){this.draggedTaskId$=this.store.select(Tt),this.draggedTaskIdSub$=this.draggedTaskId$.subscribe(s=>{this.draggedTaskId=s})}ngAfterViewInit(){const s=this.store.pipe((0,r.Ys)(vt));let o=s.subscribe(i=>{this.confirmDrag(this.list._id,i)});o.unsubscribe(),C(document,"mousemove").pipe((0,y.b)(i=>{const u=this.$list.getBoundingClientRect();i.pageX>u.left&&i.pageX<u.right&&i.pageY>u.top&&i.pageY<u.bottom&&this.draggedTaskId?o.closed&&(o=s.subscribe(f=>{this.confirmDrag(this.list._id,f)})):o.unsubscribe()})).subscribe()}confirmDrag(s,o){o&&this.store.dispatch(j({listId:s,taskId:o}))}onOpenAddTaskModal(){this.store.dispatch(P({currentList:this.list}))}ngOnDestroy(){this.draggedTaskIdSub$.unsubscribe()}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(r.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-board-list"]],viewQuery:function(s,o){if(1&s&&e.Gf(Dt,5),2&s){let a;e.iGM(a=e.CRH())&&(o.listChild=a.first)}},inputs:{list:"list",tasks$:"tasks$"},decls:11,vars:8,consts:[[1,"board-list"],[1,"board-list__title"],[1,"list",3,"ngStyle"],["$list",""],["type","color",1,"list__color-picker",3,"ngModel","ngModelChange"],["type","button",1,"list__button",3,"click"],[1,"list-items"],[3,"task",4,"ngFor","ngForOf"],[3,"task"]],template:function(s,o){1&s&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2,3)(5,"input",4),e.NdJ("ngModelChange",function(i){return o.backgroundColor=i}),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return o.onOpenAddTaskModal()}),e._uU(7,"+ "),e.qZA(),e.TgZ(8,"ul",6),e.YNc(9,Yt,1,1,"app-board-task",7),e.ALo(10,"async"),e.qZA()()()),2&s&&(e.xp6(2),e.Oqu(o.list.name),e.xp6(1),e.Q6J("ngStyle",e.VKq(6,Ht,o.backgroundColor)),e.xp6(2),e.Q6J("ngModel",o.backgroundColor),e.xp6(4),e.Q6J("ngForOf",e.lcZ(10,4,o.tasks$)))},dependencies:[k.sg,k.PC,p.Fj,p.JJ,p.On,ot,k.Ov],styles:[".board-list[_ngcontent-%COMP%]{width:300px;position:relative}.board-list__title[_ngcontent-%COMP%]{text-align:center}.list[_ngcontent-%COMP%]{background-color:#e1e1e1;padding:10px}.list__color-picker[_ngcontent-%COMP%]{position:absolute;top:0;right:0;border:0;margin:0;padding:0;width:30px}.list__button[_ngcontent-%COMP%]{width:100%;font-size:24px;background-color:#c77d91;cursor:pointer;margin-bottom:10px}.list-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;margin:0;padding:0}"],changeDetection:0}),t})();function Nt(t,n){1&t&&(e.TgZ(0,"span"),e._uU(1," This field is required!"),e.qZA())}function Jt(t,n){1&t&&(e.TgZ(0,"span"),e._uU(1," Max length is 15 symbols!"),e.qZA())}function wt(t,n){if(1&t){const s=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(s);const a=e.oxw();return e.KtG(a.onArchiveTask())}),e._uU(1," Archive "),e.qZA()}}const Rt=function(){return{justifyContent:"space-between"}},Qt=function(){return{justifyContent:"center"}};let zt=(()=>{class t{constructor(s,o,a){this.store=s,this.fb=o,this.route=a}ngOnInit(){this.initializeForm()}initializeForm(){this.taskModalForm=this.fb.group({name:[this.currentTask?.name?this.currentTask?.name:"",[p.kI.required,p.kI.maxLength(15)]]})}onSubmit(){this.isEditMode?this.editTask():this.addTask(),this.onModalClose()}addTask(){this.store.dispatch(x({request:{boardId:this.route.snapshot.params.id,listId:this.currentList?._id,name:this.taskModalForm.value.name}}))}editTask(){this.store.dispatch(D({taskId:this.currentTask?._id,newName:this.taskModalForm.value.name}))}onArchiveTask(){this.store.dispatch(q({taskId:this.currentTask._id})),this.onModalClose()}onModalClose(){this.store.dispatch(K())}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(r.yh),e.Y36(p.qu),e.Y36(T.gz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-task-modal"]],inputs:{currentList:"currentList",currentTask:"currentTask",isEditMode:"isEditMode"},decls:12,vars:10,consts:[[1,"backdrop",3,"click"],[1,"modal",3,"formGroup","ngSubmit"],[1,"name-block"],["for","task-name"],["type","text","id","task-name","formControlName","name"],[4,"ngIf"],[1,"modal-controls",3,"ngStyle"],["type","submit",1,"modal-controls__button","modal-controls__button_edit",3,"disabled"],["class","modal-controls__button modal-controls__button_archive","type","button",3,"click",4,"ngIf"],["type","button",1,"modal-controls__button","modal-controls__button_archive",3,"click"]],template:function(s,o){if(1&s&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return o.onModalClose()}),e.qZA(),e.TgZ(1,"form",1),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(2,"div",2)(3,"label",3),e._uU(4),e.qZA(),e._UZ(5,"input",4),e.YNc(6,Nt,2,0,"span",5),e.YNc(7,Jt,2,0,"span",5),e.TgZ(8,"div",6)(9,"button",7),e._uU(10),e.qZA(),e.YNc(11,wt,2,0,"button",8),e.qZA()()()),2&s){let a,i;e.xp6(1),e.Q6J("formGroup",o.taskModalForm),e.xp6(3),e.hij("",o.isEditMode?"Edit":null," Task Name"),e.xp6(2),e.Q6J("ngIf",(null==(a=o.taskModalForm.get("name"))||null==a.errors?null:a.errors.required)&&(null==(a=o.taskModalForm.get("name"))?null:a.touched)),e.xp6(1),e.Q6J("ngIf",(null==(i=o.taskModalForm.get("name"))||null==i.value?null:i.value.length)>15),e.xp6(1),e.Q6J("ngStyle",o.isEditMode?e.DdM(8,Rt):e.DdM(9,Qt)),e.xp6(1),e.Q6J("disabled",!o.taskModalForm.valid),e.xp6(1),e.hij(" ",o.isEditMode?"Edit":"Add"," Task "),e.xp6(1),e.Q6J("ngIf",o.isEditMode)}},dependencies:[k.O5,k.PC,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u],changeDetection:0}),t})();const nt=(0,r.PH)(l.M.OPEN_ARCHIVE,(0,r.Ky)());let Xt=(()=>{class t{constructor(s,o){this.store=s,this.route=o}onOpenArchive(){this.store.dispatch(nt({boardId:this.route.snapshot.params.id}))}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(r.yh),e.Y36(T.gz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-archive-button"]],decls:1,vars:0,consts:[["type","button",1,"archive-button",3,"click"]],template:function(s,o){1&s&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return o.onOpenArchive()}),e.qZA())},styles:[".archive-button[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:10px;width:100px;height:50px;cursor:pointer;background-image:url(archive.e98a25d59a827019.png);background-size:cover;border:none}"]}),t})();function Vt(t,n){if(1&t&&(e.TgZ(0,"div",5),e._UZ(1,"app-backend-error-message",6),e.ALo(2,"async"),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("backendErrorMessage",e.lcZ(2,1,s.backendErrorMessage$))}}function jt(t,n){if(1&t&&e._UZ(0,"app-board-list",7),2&t){const s=n.$implicit,o=e.oxw();e.Q6J("list",s)("tasks$",o.getTasks(s._id))}}function Wt(t,n){if(1&t&&(e._UZ(0,"app-task-modal",8),e.ALo(1,"async"),e.ALo(2,"async"),e.ALo(3,"async")),2&t){const s=e.oxw();e.Q6J("isEditMode",e.lcZ(1,3,s.isEditMode$))("currentList",e.lcZ(2,5,s.currentList$))("currentTask",e.lcZ(3,7,s.currentTask$))}}let qt=(()=>{class t{constructor(s,o){this.store=s,this.route=o}ngOnInit(){const s=this.route.snapshot.params.id;this.store.dispatch($({boardId:s})),this.store.dispatch((0,E.QK)({boardId:s})),this.initializeValues()}initializeValues(){this.lists$=this.store.pipe((0,r.Ys)(ut)),this.tasks$=this.store.pipe((0,r.Ys)(pt)),this.currentList$=this.store.pipe((0,r.Ys)(ht)),this.currentTask$=this.store.pipe((0,r.Ys)(ft)),this.boardName$=this.store.pipe((0,r.Ys)(kt)),this.isTaskModalOpened$=this.store.pipe((0,r.Ys)(gt)),this.isEditMode$=this.store.pipe((0,r.Ys)(mt)),this.backendErrorMessage$=this.store.pipe((0,r.Ys)(bt))}getTasks(s){return this.tasks$.pipe((0,g.U)(o=>o.filter(a=>a.listId===s)))}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(r.yh),e.Y36(T.gz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-board"]],decls:12,vars:12,consts:[["class","backend-error",4,"ngIf"],[3,"boardName"],[1,"container","board"],[3,"list","tasks$",4,"ngFor","ngForOf"],[3,"isEditMode","currentList","currentTask",4,"ngIf"],[1,"backend-error"],[3,"backendErrorMessage"],[3,"list","tasks$"],[3,"isEditMode","currentList","currentTask"]],template:function(s,o){1&s&&(e.TgZ(0,"main"),e.YNc(1,Vt,3,3,"div",0),e.ALo(2,"async"),e._UZ(3,"app-toolbar",1),e.ALo(4,"async"),e.TgZ(5,"div",2),e.YNc(6,jt,1,2,"app-board-list",3),e.ALo(7,"async"),e.YNc(8,Wt,4,9,"app-task-modal",4),e.ALo(9,"async"),e._UZ(10,"app-archive-button"),e.qZA(),e._UZ(11,"router-outlet"),e.qZA()),2&s&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,4,o.backendErrorMessage$)),e.xp6(2),e.Q6J("boardName",e.lcZ(4,6,o.boardName$)),e.xp6(3),e.Q6J("ngForOf",e.lcZ(7,8,o.lists$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(9,10,o.isTaskModalOpened$)))},dependencies:[k.sg,k.O5,At.n,T.lC,Mt.L,Bt,zt,Xt,k.Ov],styles:[".board[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.backend-error[_ngcontent-%COMP%]{position:fixed;top:0;left:0;background-color:#d99292}"],changeDetection:0}),t})();var te=c(8641),b=c(2340),ee=c(529);let v=(()=>{class t{constructor(s){this.http=s}getLists(s){return this.http.get(b.N.apiUrl+`/lists?boardId=${s}`)}getTasks(s){return this.http.get(b.N.apiUrl+`/tasks?boardId=${s}`)}addTask(s){return this.http.post(b.N.apiUrl+"/tasks",s)}editTask(s,o){return this.http.put(b.N.apiUrl+`/tasks/${s}`,{name:o})}deleteTask(s){return this.http.delete(b.N.apiUrl+`/tasks/${s}`)}changeTaskList(s,o){return this.http.patch(b.N.apiUrl+`/tasks/${o}`,{listId:s})}archiveTask(s){return this.http.patch(b.N.apiUrl+`/tasks/${s}/archive`,{})}}return t.\u0275fac=function(s){return new(s||t)(e.LFG(ee.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();var A=c(262),M=c(9646);let se=(()=>{class t{constructor(s,o){this.actions$=s,this.boardService=o,this.getList$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)($),(0,m.w)(({boardId:a})=>this.boardService.getLists(a).pipe((0,g.U)(i=>I({response:i})),(0,A.K)(i=>(0,M.of)(O({backendErrorMessage:i.error.message})))))))}}return t.\u0275fac=function(s){return new(s||t)(e.LFG(d.eX),e.LFG(v))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})(),oe=(()=>{class t{constructor(s,o){this.actions$=s,this.boardService=o,this.addTask$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(x),(0,m.w)(({request:a})=>this.boardService.addTask(a).pipe((0,g.U)(i=>G({newTask:i})),(0,A.K)(i=>(0,M.of)(U({backendErrorMessage:i.error.message})))))))}}return t.\u0275fac=function(s){return new(s||t)(e.LFG(d.eX),e.LFG(v))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})(),ne=(()=>{class t{constructor(s,o){this.actions$=s,this.boardService=o,this.getTasks$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(E.QK),(0,m.w)(({boardId:a})=>this.boardService.getTasks(a).pipe((0,g.U)(i=>(0,E._0)({tasks:i})),(0,A.K)(i=>(0,M.of)((0,E.f9)({backendErrorMessage:i.error.message})))))))}}return t.\u0275fac=function(s){return new(s||t)(e.LFG(d.eX),e.LFG(v))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})(),re=(()=>{class t{constructor(s,o){this.actions$=s,this.boardService=o,this.editTask$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(D),(0,m.w)(({taskId:a,newName:i})=>this.boardService.editTask(a,i).pipe((0,g.U)(()=>Y({taskId:a,newName:i})),(0,A.K)(u=>(0,M.of)(H({backendErrorMessage:u.error.message})))))))}}return t.\u0275fac=function(s){return new(s||t)(e.LFG(d.eX),e.LFG(v))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})(),ae=(()=>{class t{constructor(s,o){this.actions$=s,this.boardService=o,this.deleteTask$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(B),(0,m.w)(({taskId:a})=>this.boardService.deleteTask(a).pipe((0,g.U)(()=>N({taskId:a})),(0,A.K)(i=>(0,M.of)(J({backendErrorMessage:i.error.message}))))))),this.deleteTaskFromArchive$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(w),(0,m.w)(({taskId:a})=>this.boardService.deleteTask(a).pipe((0,g.U)(()=>R({taskId:a})),(0,A.K)(i=>(0,M.of)(Q({backendErrorMessage:i.error.message})))))))}}return t.\u0275fac=function(s){return new(s||t)(e.LFG(d.eX),e.LFG(v))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})(),ie=(()=>{class t{constructor(s,o){this.actions$=s,this.boardService=o,this.changeTaskList$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(j),(0,m.w)(({listId:a,taskId:i})=>this.boardService.changeTaskList(a,i).pipe((0,g.U)(()=>W({listId:a,taskId:i}))))))}}return t.\u0275fac=function(s){return new(s||t)(e.LFG(d.eX),e.LFG(v))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})(),ce=(()=>{class t{constructor(s,o){this.actions$=s,this.boardService=o,this.archiveTask$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(q),(0,m.w)(({taskId:a})=>this.boardService.archiveTask(a).pipe((0,g.U)(()=>tt({taskId:a})),(0,A.K)(i=>(0,M.of)(et({backendErrorMessage:i.error.message})))))))}}return t.\u0275fac=function(s){return new(s||t)(e.LFG(d.eX),e.LFG(v))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})(),de=(()=>{class t{constructor(s,o){this.actions$=s,this.router=o,this.openArchive$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(nt),(0,y.b)(({boardId:a})=>{this.router.navigate([`/board/${a}/archive`])})),{dispatch:!1})}}return t.\u0275fac=function(s){return new(s||t)(e.LFG(d.eX),e.LFG(T.F0))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();const rt=(0,r.PH)(l.M.CLOSE_ARCHIVE,(0,r.Ky)());function le(t,n){1&t&&e._UZ(0,"app-board-task",4),2&t&&e.Q6J("task",n.$implicit)}let ue=(()=>{class t{constructor(s,o){this.store=s,this.route=o}ngOnInit(){this.archivedTasks$=this.store.pipe((0,r.Ys)(_t))}onCloseArchive(){this.store.dispatch(rt({boardId:this.route.snapshot.parent.params.id}))}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(r.yh),e.Y36(T.gz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-archive"]],decls:6,vars:3,consts:[[1,"backdrop",3,"click"],[1,"modal"],[1,"modal__title"],[3,"task",4,"ngFor","ngForOf"],[3,"task"]],template:function(s,o){1&s&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return o.onCloseArchive()}),e.qZA(),e.TgZ(1,"div",1)(2,"h2",2),e._uU(3,"Archive"),e.qZA(),e.YNc(4,le,1,1,"app-board-task",3),e.ALo(5,"async"),e.qZA()),2&s&&(e.xp6(4),e.Q6J("ngForOf",e.lcZ(5,1,o.archivedTasks$)))},dependencies:[k.sg,ot,k.Ov],styles:[".modal[_ngcontent-%COMP%]{align-items:normal;gap:10px}.modal__title[_ngcontent-%COMP%]{font-size:2.5rem;text-align:center}"]}),t})(),pe=(()=>{class t{constructor(s,o){this.actions$=s,this.router=o,this.closeArchive$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(rt),(0,y.b)(({boardId:a})=>{this.router.navigate([`/board/${a}`])})),{dispatch:!1})}}return t.\u0275fac=function(s){return new(s||t)(e.LFG(d.eX),e.LFG(T.F0))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();var ke=c(2948);const he=[{path:"",component:qt,canActivate:[F.a],children:[{path:"archive",component:ue,canActivate:[F.a]}]}];let fe=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[v],imports:[k.ez,te.V,p.UX,T.Bz.forChild(he),r.Aw.forFeature("board",lt),d.sQ.forFeature([se,ne,oe,re,ae,ie,ce,de,pe]),ke.p,p.u5]}),t})()}}]);